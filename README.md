Ниже приведено примерное техническое задание (ТЗ) для группового проекта из 6 человек по разработке симулятора микроконтроллера STM32F103C8T6.

---

# ТЕХНИЧЕСКОЕ ЗАДАНИЕ

на разработку симулятора микроконтроллера STM32F103C8T6

## 1. Общие сведения

### 1.1 Наименование проекта

Симулятор микроконтроллера STM32F103C8T6 (аналог платы Blue Pill).

### 1.2 Основание для разработки

Курсовой проект по дисциплине «Программирование встроенных систем».

### 1.3 Цель проекта

Разработка программного симулятора микроконтроллера STM32F103C8T6 с поддержкой исполнения инструкций ядра ARM Cortex-M3 и моделированием базовых периферийных устройств.

### 1.4 Команда проекта

Группа из 6 человек.

---

## 2. Назначение и цели разработки

### 2.1 Назначение системы

Симулятор предназначен для:

* изучения архитектуры ARM Cortex-M3;
* тестирования программ без физического микроконтроллера;
* отладки работы с таймерами, прерываниями и UART;
* выполнения лабораторных работ по встроенным системам.

### 2.2 Основные цели

* Реализовать интерпретатор инструкций ARM Cortex-M3 (Thumb-2).
* Смоделировать ключевые периферийные устройства.
* Обеспечить механизм загрузки и выполнения прошивки.
* Реализовать систему тестирования корректности работы.

---

## 3. Объект разработки

Программный симулятор микроконтроллера STM32F103C8T6, включающий:

1. Ядро процессора ARM Cortex-M3
2. Подсистему памяти
3. Контроллер прерываний (NVIC)
4. Таймер
5. UART
6. Средства логирования и тестирования

---

## 4. Функциональные требования

### 4.1 Ядро процессора

Система должна:

* Поддерживать 32-битную архитектуру ARM Cortex-M3 (Thumb-2).
* Реализовывать:

  * Регистры R0–R15 (включая PC, LR, SP)
  * Регистры состояния (xPSR)
* Поддерживать:

  * Арифметические инструкции
  * Логические инструкции
  * Инструкции ветвления
  * Инструкции работы со стеком
  * Инструкции загрузки/сохранения (LDR/STR)
* Обеспечивать пошаговое выполнение.
* Поддерживать режим выполнения по тактам (cycle-based simulation).

### 4.2 Подсистема памяти

Должна быть реализована модель памяти:

* Flash
* SRAM
* Память, отображённая на регистры периферии (memory-mapped I/O)

Требования:

* Проверка выхода за границы памяти.
* Корректная обработка выравнивания.
* Возможность загрузки ELF или бинарного файла.

### 4.3 Контроллер прерываний (NVIC)

* Поддержка таблицы векторов прерываний.
* Поддержка приоритетов.
* Поддержка маскирования.
* Обработка внешних и внутренних прерываний.
* Корректная эмуляция перехода в обработчик прерывания.

### 4.4 Таймер

* Реализация базового таймера:

  * Предделитель
  * Счётчик
  * Автоперезагрузка
* Генерация прерываний по переполнению.
* Возможность настройки через регистры.

### 4.5 UART

* Реализация регистров USART.
* Передача и приём данных.
* Генерация прерываний при:

  * Приёме байта
  * Завершении передачи
* Подключение к консоли (stdin/stdout).

### 4.6 Система логирования

* Лог инструкций.
* Лог доступа к памяти.
* Лог прерываний.
* Возможность включения/выключения уровней логирования.

---

## 5. Нефункциональные требования

* Язык реализации: C / C++ / Go (по выбору команды).
* Система контроля версий: Git.
* Документирование кода.
* Покрытие ключевых компонентов модульными тестами.
* Кроссплатформенность (Linux/Windows).
* Время непрерывной работы без ошибок — не менее 1 часа.

---

## 6. Архитектурные требования

Рекомендуемая архитектура:

* Модуль CPU
* Модуль Memory
* Модуль NVIC
* Модуль Timer
* Модуль UART
* Модуль Loader
* Модуль Debug/Logger

Взаимодействие через чётко определённые интерфейсы.

Запрещается:

* Жёсткая связность модулей
* Прямой доступ к памяти периферии без абстракции

---

## 7. Требования к тестированию

### 7.1 Модульные тесты

* Проверка корректности выполнения инструкций.
* Проверка работы таймера.
* Проверка генерации прерываний.
* Проверка UART.

### 7.2 Интеграционные тесты

* Запуск тестовой прошивки.
* Проверка корректности взаимодействия CPU и периферии.
* Проверка работы прерываний.

### 7.3 Тестовая прошивка

Должна включать:

* Мигающий таймер
* Передачу строки по UART
* Обработчик прерывания

---

## 8. Распределение ролей (6 человек)

1. Архитектор проекта / CPU-разработчик

   * Архитектура
   * Реализация ядра инструкций

2. Разработчик памяти и загрузчика

   * Memory subsystem
   * ELF/бин загрузчик

3. Разработчик NVIC и механизма прерываний

4. Разработчик таймера

5. Разработчик UART и взаимодействия с консолью

6. Инженер по тестированию и DevOps

   * CI
   * Unit/integration tests
   * Система сборки
   * Подготовка отчёта и документации

---

## 9. Этапы разработки

1. Проектирование архитектуры.
2. Реализация ядра CPU.
3. Реализация памяти.
4. Реализация NVIC.
5. Реализация таймера.
6. Реализация UART.
7. Интеграция компонентов.
8. Разработка тестов.
9. Подготовка отчёта и презентации.

---

## 10. Ожидаемые результаты

По завершении проекта должен быть предоставлен:

* Репозиторий с исходным кодом.
* PDF-отчёт, включающий:

  * Техническое задание
  * Описание архитектуры
  * Описание реализации
  * Описание системы тестирования
* База знаний (Obsidian).
* Презентация проекта.
* Демонстрация работы симулятора.

---

Если нужно, могу дополнительно:

* написать раздел «Описание архитектуры» для отчёта;
* сделать диаграмму компонентов;
* расписать план работ по неделям семестра;
* усложнить ТЗ до уровня почти дипломного проекта.
